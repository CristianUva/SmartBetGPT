import sys
import os
import logging

# Configurazione logging
logging.basicConfig(level=logging.INFO, 
                   format='%(asctime)s - %(name)s - %(levelname)s - %(message)s')
logger = logging.getLogger(__name__)

# IMPORTANTE: Modifica questo percorso con il percorso effettivo al tuo progetto
path = '/home/SmartBetGPT/SmartBetGPT'

logger.info(f"Impostazione percorso app: {path}")

if path not in sys.path:
    sys.path.append(path)

# Imposta variabili d'ambiente necessarie
os.environ['PYTHONANYWHERE_SITE'] = 'true'
os.environ['USE_MYSQL'] = 'true'

# Imposta credenziali MySQL
os.environ['MYSQL_USER'] = 'SmartBetGPT'
os.environ['MYSQL_PASSWORD'] = 'Angelogalanti69'
os.environ['MYSQL_HOST'] = 'SmartBetGPT.mysql.pythonanywhere-services.com'
os.environ['MYSQL_DATABASE'] = 'SmartBetGPT$database'

try:
    # Importa e crea l'applicazione Flask
    from app import create_app
    application = create_app()
    
except Exception as e:
    logger.error(f"Errore durante l'inizializzazione: {e}")
    import traceback
    traceback.print_exc()
    raise e
